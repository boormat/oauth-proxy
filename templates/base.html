{% macro nav(section) %}
    <ul class="nav">
        <li{% if section == 'index' %} class="active"{% endif %}><a href="/">Home</a></li>
        <li{% if section == 'services' %} class="active"{% endif %}><a href="/services/">Services</a></li>
        <li><a href="https://github.com/gulopine/foauth.org">Source</a></li>
    </ul>
    <div class="pull-right"><ul class="nav">
        {% if current_user.is_authenticated() %}
        <li><a href="{{ url_for('logout') }}">Log out</a></li>
        {% else %}
        <li{% if section == 'login' %} class="active"{% endif %}>
            <a href="{{ url_for('login') }}">Log in</a>
        </li>
        {% endif %}
    </ul></div>
{% endmacro %}

<!doctype html>
<html>
	<head>
{% block head %}
		<title>OAuth proxy</title>
		<link rel="stylesheet" href="{{ url_for('static', filename='bootstrap.min.css') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
{% endblock %}
	</head>
	<body>
		<div class="topbar">
			<div class="fill">
				<div class="container">
					{% block nav %}{{ nav('index') }}{% endblock %}
				</div>
			</div>
		</div>
		<div class="container">
		{% with messages = get_flashed_messages(with_categories=True) %}
			{% if messages %}
				<ul class="flashes span16">
				{% for category, message in messages %}
					<li class="{{ category|safe }}">{{ message|safe }}</li>
				{% endfor %}
				</ul>
			{% endif %}
		{% endwith %}
			{% block content %}{% endblock %}
		</div>
	</body>
</html>
